{"ast":null,"code":"\"use strict\";\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createOriginalStackFrame = void 0;\nvar code_frame_1 = require(\"@babel/code-frame\");\nvar path_1 = __importDefault(require(\"path\"));\nvar source_map_1 = require(\"source-map\");\nfunction getSourcePath(source) {\n  if (source.startsWith('webpack:///')) {\n    return source.substring(11);\n  }\n  if (source.startsWith('webpack://_N_E/')) {\n    return source.substring(15);\n  }\n  if (source.startsWith('webpack://')) {\n    return source.substring(10);\n  }\n  return source;\n}\nfunction findOriginalSourcePositionAndContent(_x, _x2) {\n  return _findOriginalSourcePositionAndContent.apply(this, arguments);\n}\nfunction _findOriginalSourcePositionAndContent() {\n  _findOriginalSourcePositionAndContent = _asyncToGenerator(function* (webpackSource, position) {\n    var _a, _b, _c;\n    var consumer = yield new source_map_1.SourceMapConsumer(webpackSource.map());\n    try {\n      var sourcePosition = consumer.originalPositionFor({\n        line: position.line,\n        column: (_a = position.column) !== null && _a !== void 0 ? _a : 0\n      });\n      if (!sourcePosition.source) {\n        return null;\n      }\n      var sourceContent = (_b = consumer.sourceContentFor(sourcePosition.source, true)) !== null && _b !== void 0 ? _b : null;\n      return {\n        sourcePosition: sourcePosition,\n        sourceContent: sourceContent\n      };\n    } finally {\n      (_c = consumer.destroy) === null || _c === void 0 ? void 0 : _c.call(consumer);\n    }\n  });\n  return _findOriginalSourcePositionAndContent.apply(this, arguments);\n}\nfunction createOriginalStackFrame(_x3) {\n  return _createOriginalStackFrame.apply(this, arguments);\n}\nfunction _createOriginalStackFrame() {\n  _createOriginalStackFrame = _asyncToGenerator(function* (_ref) {\n    var line = _ref.line,\n      column = _ref.column,\n      source = _ref.source,\n      modulePath = _ref.modulePath,\n      rootDirectory = _ref.rootDirectory,\n      frame = _ref.frame,\n      frameNodeModules = _ref.frameNodeModules;\n    var _a, _b, _c;\n    var result = yield findOriginalSourcePositionAndContent(source, {\n      line: line,\n      column: column\n    });\n    if (result === null) {\n      return null;\n    }\n    var sourcePosition = result.sourcePosition,\n      sourceContent = result.sourceContent;\n    if (!sourcePosition.source) {\n      return null;\n    }\n    var filePath = path_1.default.resolve(rootDirectory, modulePath || getSourcePath(sourcePosition.source));\n    var originalFrame = {\n      file: sourceContent ? path_1.default.relative(rootDirectory, filePath) : sourcePosition.source,\n      lineNumber: sourcePosition.line,\n      column: sourcePosition.column,\n      methodName: frame.methodName,\n      arguments: []\n    };\n    var originalCodeFrame = (frameNodeModules || !((_b = (_a = originalFrame.file) === null || _a === void 0 ? void 0 : _a.includes('node_modules')) !== null && _b !== void 0 ? _b : true)) && sourceContent && sourcePosition.line ? (0, code_frame_1.codeFrameColumns)(sourceContent, {\n      start: {\n        line: sourcePosition.line,\n        column: (_c = sourcePosition.column) !== null && _c !== void 0 ? _c : 0\n      }\n    }, {\n      forceColor: true\n    }) : null;\n    return {\n      originalStackFrame: originalFrame,\n      originalCodeFrame: originalCodeFrame\n    };\n  });\n  return _createOriginalStackFrame.apply(this, arguments);\n}\nexports.createOriginalStackFrame = createOriginalStackFrame;","map":{"version":3,"names":["code_frame_1","require","path_1","__importDefault","source_map_1","getSourcePath","source","startsWith","substring","findOriginalSourcePositionAndContent","_x","_x2","_findOriginalSourcePositionAndContent","apply","arguments","_asyncToGenerator","webpackSource","position","consumer","SourceMapConsumer","map","sourcePosition","originalPositionFor","line","column","_a","sourceContent","_b","sourceContentFor","_c","destroy","call","createOriginalStackFrame","_x3","_createOriginalStackFrame","_ref","modulePath","rootDirectory","frame","frameNodeModules","result","filePath","default","resolve","originalFrame","file","relative","lineNumber","methodName","originalCodeFrame","includes","codeFrameColumns","start","forceColor","originalStackFrame","exports"],"sources":["/Users/henriqueeidt/Documents/Projects/poc-web-mobile-components/component-library/node_modules/@expo/webpack-config/src/plugins/ExpectedErrors/createOriginalStackFrame.ts"],"sourcesContent":["/**\n * Copyright © 2021 650 Industries.\n * Copyright © 2021 Vercel, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * Based on https://github.com/vercel/next.js/blob/1552b8341e5b512a2827485a4a9689cd429c520e/packages/react-dev-overlay/src/middleware.ts#L63-L178\n */\n\nimport { codeFrameColumns } from '@babel/code-frame';\nimport path from 'path';\n// @ts-ignore\nimport { NullableMappedPosition, SourceMapConsumer } from 'source-map';\nimport { StackFrame } from 'stacktrace-parser';\n\nexport type OriginalStackFrameResponse = {\n  originalStackFrame: StackFrame;\n  originalCodeFrame: string | null;\n};\n\nfunction getSourcePath(source: string) {\n  // Webpack prefixes certain source paths with this path\n  if (source.startsWith('webpack:///')) {\n    return source.substring(11);\n  }\n\n  // Make sure library name is filtered out as well\n  if (source.startsWith('webpack://_N_E/')) {\n    return source.substring(15);\n  }\n\n  if (source.startsWith('webpack://')) {\n    return source.substring(10);\n  }\n\n  return source;\n}\n\n// TODO: Use dev-server symbolicator instead\nasync function findOriginalSourcePositionAndContent(\n  webpackSource: any,\n  position: { line: number; column: number | null }\n) {\n  const consumer = await new SourceMapConsumer(webpackSource.map());\n  try {\n    const sourcePosition: NullableMappedPosition = consumer.originalPositionFor({\n      line: position.line,\n      column: position.column ?? 0,\n    });\n\n    if (!sourcePosition.source) {\n      return null;\n    }\n\n    const sourceContent: string | null =\n      consumer.sourceContentFor(sourcePosition.source, /* returnNullOnMissing */ true) ?? null;\n\n    return {\n      sourcePosition,\n      sourceContent,\n    };\n  } finally {\n    // @ts-ignore: unexpected type\n    consumer.destroy?.();\n  }\n}\n\nexport async function createOriginalStackFrame({\n  line,\n  column,\n  source,\n  modulePath,\n  rootDirectory,\n  frame,\n  frameNodeModules,\n}: {\n  line: number;\n  column: number | null;\n  source: any;\n  modulePath?: string;\n  rootDirectory: string;\n  frameNodeModules?: boolean;\n  frame: any;\n}): Promise<OriginalStackFrameResponse | null> {\n  const result = await findOriginalSourcePositionAndContent(source, {\n    line,\n    column,\n  });\n\n  if (result === null) {\n    return null;\n  }\n\n  const { sourcePosition, sourceContent } = result;\n\n  if (!sourcePosition.source) {\n    return null;\n  }\n\n  const filePath = path.resolve(rootDirectory, modulePath || getSourcePath(sourcePosition.source));\n\n  const originalFrame: StackFrame = {\n    file: sourceContent ? path.relative(rootDirectory, filePath) : sourcePosition.source,\n    lineNumber: sourcePosition.line,\n    column: sourcePosition.column,\n    methodName: frame.methodName, // TODO: resolve original method name (?)\n    arguments: [],\n  };\n\n  const originalCodeFrame: string | null =\n    (frameNodeModules || !(originalFrame.file?.includes('node_modules') ?? true)) &&\n    sourceContent &&\n    sourcePosition.line\n      ? (codeFrameColumns(\n          sourceContent,\n          {\n            start: {\n              line: sourcePosition.line,\n              column: sourcePosition.column ?? 0,\n            },\n          },\n          { forceColor: true }\n        ) as string)\n      : null;\n\n  return {\n    originalStackFrame: originalFrame,\n    originalCodeFrame,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}