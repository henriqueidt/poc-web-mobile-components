{"ast":null,"code":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createEvalSourceMapMiddleware = void 0;\nfunction base64SourceMap(source) {\n  var base64 = Buffer.from(JSON.stringify(source.map()), 'utf8').toString('base64');\n  return \"data:application/json;charset=utf-8;base64,\" + base64;\n}\nfunction getSourceById(server, id) {\n  var module = Array.from(server._stats.compilation.modules).find(function (m) {\n    return server._stats.compilation.chunkGraph.getModuleId(m) === id;\n  });\n  return module.originalSource();\n}\nfunction createEvalSourceMapMiddleware(server) {\n  return function handleWebpackInternalMiddleware(req, res, next) {\n    var _a;\n    if (req.url.startsWith('/__get-internal-source')) {\n      var fileName = req.query.fileName;\n      if (typeof fileName !== 'string') {\n        return next();\n      }\n      var id = (_a = fileName === null || fileName === void 0 ? void 0 : fileName.match(/webpack-internal:\\/\\/\\/(.+)/)) === null || _a === void 0 ? void 0 : _a[1];\n      if (!id || !server._stats) {\n        return next();\n      }\n      var source = getSourceById(server, id);\n      var sourceMapURL = \"//# sourceMappingURL=\" + base64SourceMap(source);\n      var sourceURL = \"//# sourceURL=webpack-internal:///\" + module.id;\n      res.end(source.source() + \"\\n\" + sourceMapURL + \"\\n\" + sourceURL);\n    } else {\n      return next();\n    }\n  };\n}\nexports.createEvalSourceMapMiddleware = createEvalSourceMapMiddleware;","map":{"version":3,"names":["base64SourceMap","source","base64","Buffer","from","JSON","stringify","map","toString","getSourceById","server","id","module","Array","_stats","compilation","modules","find","m","chunkGraph","getModuleId","originalSource","createEvalSourceMapMiddleware","handleWebpackInternalMiddleware","req","res","next","url","startsWith","fileName","query","_a","match","sourceMapURL","sourceURL","end","exports"],"sources":["/Users/henriqueeidt/Documents/Projects/poc-web-mobile-components/component-library/node_modules/@expo/webpack-config/src/utils/evalSourceMapMiddleware.ts"],"sourcesContent":["/**\n * Copyright (c) 2022 Expo, Inc.\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * Based on https://github.com/facebook/create-react-app/blob/a422bf2/packages/react-dev-utils/evalSourceMapMiddleware.js\n * But with Node LTS support.\n */\n\nimport type express from 'express';\nimport type webpack from 'webpack';\nimport type WebpackDevServer from 'webpack-dev-server';\n\nfunction base64SourceMap(source: any) {\n  const base64 = Buffer.from(JSON.stringify(source.map()), 'utf8').toString('base64');\n  return `data:application/json;charset=utf-8;base64,${base64}`;\n}\n\nfunction getSourceById(server: WebpackDevServer & any, id: string) {\n  const module = Array.from(server._stats.compilation.modules).find(\n    m => server._stats.compilation.chunkGraph.getModuleId(m) === id\n  ) as webpack.Module[];\n\n  // @ts-ignore\n  return module.originalSource();\n}\n\n/*\n * Middleware responsible for retrieving a generated source\n * Receives a webpack internal url: \"webpack-internal:///<module-id>\"\n * Returns a generated source: \"<source-text><sourceMappingURL><sourceURL>\"\n *\n * Based on EvalSourceMapDevToolModuleTemplatePlugin.js\n */\nexport function createEvalSourceMapMiddleware(server: WebpackDevServer) {\n  return function handleWebpackInternalMiddleware(\n    req: express.Request,\n    res: express.Response,\n    next: express.NextFunction\n  ) {\n    if (req.url.startsWith('/__get-internal-source')) {\n      const fileName = req.query.fileName;\n      if (typeof fileName !== 'string') {\n        return next();\n      }\n      const id = fileName?.match(/webpack-internal:\\/\\/\\/(.+)/)?.[1];\n      // @ts-ignore: untyped\n      if (!id || !server._stats) {\n        return next();\n      }\n\n      const source = getSourceById(server, id);\n      const sourceMapURL = `//# sourceMappingURL=${base64SourceMap(source)}`;\n      const sourceURL = `//# sourceURL=webpack-internal:///${module.id}`;\n      res.end(`${source.source()}\\n${sourceMapURL}\\n${sourceURL}`);\n    } else {\n      return next();\n    }\n  };\n}\n"],"mappings":";;;;;AAeA,SAASA,eAAeA,CAACC,MAAW;EAClC,IAAMC,MAAM,GAAGC,MAAM,CAACC,IAAI,CAACC,IAAI,CAACC,SAAS,CAACL,MAAM,CAACM,GAAG,EAAE,CAAC,EAAE,MAAM,CAAC,CAACC,QAAQ,CAAC,QAAQ,CAAC;EACnF,uDAAqDN,MAAM;AAC7D;AAEA,SAASO,aAAaA,CAACC,MAA8B,EAAEC,EAAU;EAC/D,IAAMC,MAAM,GAAGC,KAAK,CAACT,IAAI,CAACM,MAAM,CAACI,MAAM,CAACC,WAAW,CAACC,OAAO,CAAC,CAACC,IAAI,CAC/D,UAAAC,CAAC;IAAA,OAAIR,MAAM,CAACI,MAAM,CAACC,WAAW,CAACI,UAAU,CAACC,WAAW,CAACF,CAAC,CAAC,KAAKP,EAAE;EAAA,EAC5C;EAGrB,OAAOC,MAAM,CAACS,cAAc,EAAE;AAChC;AASA,SAAgBC,6BAA6BA,CAACZ,MAAwB;EACpE,OAAO,SAASa,+BAA+BA,CAC7CC,GAAoB,EACpBC,GAAqB,EACrBC,IAA0B;;IAE1B,IAAIF,GAAG,CAACG,GAAG,CAACC,UAAU,CAAC,wBAAwB,CAAC,EAAE;MAChD,IAAMC,QAAQ,GAAGL,GAAG,CAACM,KAAK,CAACD,QAAQ;MACnC,IAAI,OAAOA,QAAQ,KAAK,QAAQ,EAAE;QAChC,OAAOH,IAAI,EAAE;;MAEf,IAAMf,EAAE,GAAG,CAAAoB,EAAA,GAAAF,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEG,KAAK,CAAC,6BAA6B,CAAC,cAAAD,EAAA,uBAAAA,EAAA,CAAG,CAAC,CAAC;MAE9D,IAAI,CAACpB,EAAE,IAAI,CAACD,MAAM,CAACI,MAAM,EAAE;QACzB,OAAOY,IAAI,EAAE;;MAGf,IAAMzB,MAAM,GAAGQ,aAAa,CAACC,MAAM,EAAEC,EAAE,CAAC;MACxC,IAAMsB,YAAY,6BAA2BjC,eAAe,CAACC,MAAM,CAAG;MACtE,IAAMiC,SAAS,0CAAwCtB,MAAM,CAACD,EAAI;MAClEc,GAAG,CAACU,GAAG,CAAIlC,MAAM,CAACA,MAAM,EAAE,UAAKgC,YAAY,UAAKC,SAAS,CAAG;KAC7D,MAAM;MACL,OAAOR,IAAI,EAAE;;EAEjB,CAAC;AACH;AAzBAU,OAAA,CAAAd,6BAAA,GAAAA,6BAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}