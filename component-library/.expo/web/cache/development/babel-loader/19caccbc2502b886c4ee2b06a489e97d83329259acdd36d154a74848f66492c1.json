{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar chalk_1 = __importDefault(require(\"chalk\"));\nvar expo_pwa_1 = require(\"expo-pwa\");\nvar webpack_1 = require(\"webpack\");\nvar ModifyHtmlWebpackPlugin_1 = __importDefault(require(\"./ModifyHtmlWebpackPlugin\"));\nvar FaviconWebpackPlugin = function (_ModifyHtmlWebpackPlu) {\n  _inherits(FaviconWebpackPlugin, _ModifyHtmlWebpackPlu);\n  var _super = _createSuper(FaviconWebpackPlugin);\n  function FaviconWebpackPlugin(pwaOptions, favicon) {\n    var _this;\n    _classCallCheck(this, FaviconWebpackPlugin);\n    _this = _super.call(this);\n    _this.pwaOptions = pwaOptions;\n    _this.favicon = favicon;\n    return _this;\n  }\n  _createClass(FaviconWebpackPlugin, [{\n    key: \"modifyAsync\",\n    value: function () {\n      var _modifyAsync = _asyncToGenerator(function* (compiler, compilation, data) {\n        var logger = compiler.getInfrastructureLogger('chrome-icons-plugin');\n        function logNotice(type, message) {\n          logger.log(chalk_1.default.magenta(\"\\u203A \" + type + \": \" + chalk_1.default.gray(message)));\n        }\n        function logWarning(type, message) {\n          logger.warn(chalk_1.default.yellow(\"\\u203A \" + type + \": \" + chalk_1.default.gray(message)));\n        }\n        if (!this.favicon) {\n          logWarning('Favicon', 'No template image found, skipping auto generation...');\n          return data;\n        }\n        var assets = yield (0, expo_pwa_1.generateFaviconAsync)(this.pwaOptions, this.favicon);\n        var links = this.pwaOptions.links.filter(function (v) {\n          var _a;\n          return (_a = v.rel) === null || _a === void 0 ? void 0 : _a.split(' ').includes('icon');\n        });\n        var _loop = function* _loop() {\n          var _asset$tag$attributes = asset.tag.attributes,\n            attributes = _asset$tag$attributes === void 0 ? {} : _asset$tag$attributes;\n          var faviconExists = links.some(function (v) {\n            var _a;\n            return v.sizes ? v.sizes === attributes.sizes : (_a = v.rel) === null || _a === void 0 ? void 0 : _a.includes('shortcut');\n          });\n          if (faviconExists) {\n            logNotice('Favicon', \"Using custom <link rel=\\\"\" + attributes.rel + \"\\\"\" + (attributes.sizes ? \" sizes=\\\"\" + attributes.sizes + \"\\\"\" : '') + \" .../>\");\n          } else {\n            compilation.emitAsset(asset.asset.path, new webpack_1.sources.RawSource(asset.asset.source));\n            data.assetTags.meta.push(asset.tag);\n          }\n        };\n        for (var asset of assets) {\n          yield* _loop();\n        }\n        return data;\n      });\n      function modifyAsync(_x, _x2, _x3) {\n        return _modifyAsync.apply(this, arguments);\n      }\n      return modifyAsync;\n    }()\n  }]);\n  return FaviconWebpackPlugin;\n}(ModifyHtmlWebpackPlugin_1.default);\nexports.default = FaviconWebpackPlugin;","map":{"version":3,"names":["chalk_1","__importDefault","require","expo_pwa_1","webpack_1","ModifyHtmlWebpackPlugin_1","FaviconWebpackPlugin","_ModifyHtmlWebpackPlu","_inherits","_super","_createSuper","pwaOptions","favicon","_this","_classCallCheck","call","_createClass","key","value","_modifyAsync","_asyncToGenerator","compiler","compilation","data","logger","getInfrastructureLogger","logNotice","type","message","log","default","magenta","gray","logWarning","warn","yellow","assets","generateFaviconAsync","links","filter","v","_a","rel","split","includes","_loop","_asset$tag$attributes","asset","tag","attributes","faviconExists","some","sizes","emitAsset","path","sources","RawSource","source","assetTags","meta","push","modifyAsync","_x","_x2","_x3","apply","arguments","exports"],"sources":["/Users/henriqueeidt/Documents/Projects/poc-web-mobile-components/component-library/node_modules/@expo/webpack-config/src/plugins/FaviconWebpackPlugin.ts"],"sourcesContent":["import chalk from 'chalk';\nimport { generateFaviconAsync, IconOptions, ProjectOptions } from 'expo-pwa';\nimport { Compilation, Compiler, sources } from 'webpack';\n\nimport ModifyHtmlWebpackPlugin, { HTMLLinkNode, HTMLPluginData } from './ModifyHtmlWebpackPlugin';\n\nexport default class FaviconWebpackPlugin extends ModifyHtmlWebpackPlugin {\n  constructor(\n    private pwaOptions: ProjectOptions & { links: HTMLLinkNode[] },\n    private favicon: IconOptions | null\n  ) {\n    super();\n  }\n\n  async modifyAsync(\n    compiler: Compiler,\n    compilation: Compilation,\n    data: HTMLPluginData\n  ): Promise<HTMLPluginData> {\n    const logger = compiler.getInfrastructureLogger('chrome-icons-plugin');\n\n    function logNotice(type: string, message: string) {\n      logger.log(chalk.magenta(`\\u203A ${type}: ${chalk.gray(message)}`));\n    }\n\n    function logWarning(type: string, message: string) {\n      logger.warn(chalk.yellow(`\\u203A ${type}: ${chalk.gray(message)}`));\n    }\n\n    if (!this.favicon) {\n      logWarning('Favicon', 'No template image found, skipping auto generation...');\n      return data;\n    }\n\n    const assets = await generateFaviconAsync(this.pwaOptions, this.favicon);\n\n    const links: HTMLLinkNode[] = this.pwaOptions.links.filter(v =>\n      v.rel?.split(' ').includes('icon')\n    );\n\n    for (const asset of assets) {\n      const { attributes = {} } = asset.tag!;\n      const faviconExists = links.some(v =>\n        v.sizes ? v.sizes === attributes.sizes : v.rel?.includes('shortcut')\n      );\n      if (faviconExists) {\n        logNotice(\n          'Favicon',\n          `Using custom <link rel=\"${attributes.rel}\"${\n            attributes.sizes ? ` sizes=\"${attributes.sizes}\"` : ''\n          } .../>`\n        );\n      } else {\n        compilation.emitAsset(asset.asset.path, new sources.RawSource(asset.asset.source));\n        data.assetTags.meta.push(asset.tag);\n      }\n    }\n    return data;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}