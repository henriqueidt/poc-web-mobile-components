{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.assignStylesValue = assignStylesValue;\nexports.getAppThemeLightNoActionBarGroup = getAppThemeLightNoActionBarGroup;\nexports.getProjectStylesXMLPathAsync = getProjectStylesXMLPathAsync;\nexports.getStyleParent = getStyleParent;\nexports.getStylesGroupAsObject = getStylesGroupAsObject;\nexports.getStylesItem = getStylesItem;\nexports.readStylesXMLAsync = readStylesXMLAsync;\nexports.removeStylesItem = removeStylesItem;\nexports.setStylesItem = setStylesItem;\nfunction _Paths() {\n  var data = require(\"./Paths\");\n  _Paths = function _Paths() {\n    return data;\n  };\n  return data;\n}\nfunction _Resources() {\n  var data = require(\"./Resources\");\n  _Resources = function _Resources() {\n    return data;\n  };\n  return data;\n}\nvar fallbackResourceString = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><resources xmlns:tools=\\\"http://schemas.android.com/tools\\\"></resources>\";\nfunction readStylesXMLAsync(_x) {\n  return _readStylesXMLAsync.apply(this, arguments);\n}\nfunction _readStylesXMLAsync() {\n  _readStylesXMLAsync = _asyncToGenerator(function* (_ref) {\n    var path = _ref.path,\n      _ref$fallback = _ref.fallback,\n      fallback = _ref$fallback === void 0 ? fallbackResourceString : _ref$fallback;\n    return (0, _Resources().readResourcesXMLAsync)({\n      path: path,\n      fallback: fallback\n    });\n  });\n  return _readStylesXMLAsync.apply(this, arguments);\n}\nfunction getProjectStylesXMLPathAsync(_x2) {\n  return _getProjectStylesXMLPathAsync.apply(this, arguments);\n}\nfunction _getProjectStylesXMLPathAsync() {\n  _getProjectStylesXMLPathAsync = _asyncToGenerator(function* (projectRoot) {\n    var _ref9 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      kind = _ref9.kind;\n    return (0, _Paths().getResourceXMLPathAsync)(projectRoot, {\n      kind: kind,\n      name: 'styles'\n    });\n  });\n  return _getProjectStylesXMLPathAsync.apply(this, arguments);\n}\nfunction ensureDefaultStyleResourceXML(xml) {\n  var _xml, _xml$resources;\n  xml = (0, _Resources().ensureDefaultResourceXML)(xml);\n  if (!Array.isArray((_xml = xml) === null || _xml === void 0 ? void 0 : (_xml$resources = _xml.resources) === null || _xml$resources === void 0 ? void 0 : _xml$resources.style)) {\n    xml.resources.style = [];\n  }\n  return xml;\n}\nfunction getStyleParent(xml, group) {\n  return (0, _Resources().findResourceGroup)(xml.resources.style, group);\n}\nfunction getStylesItem(_ref2) {\n  var name = _ref2.name,\n    xml = _ref2.xml,\n    parent = _ref2.parent;\n  xml = ensureDefaultStyleResourceXML(xml);\n  var appTheme = getStyleParent(xml, parent);\n  if (!appTheme) {\n    return null;\n  }\n  if (appTheme.item) {\n    var existingItem = appTheme.item.filter(function (_ref3) {\n      var head = _ref3.$;\n      return head.name === name;\n    })[0];\n    if (existingItem) {\n      return existingItem;\n    }\n  }\n  return null;\n}\nfunction setStylesItem(_ref4) {\n  var item = _ref4.item,\n    xml = _ref4.xml,\n    parent = _ref4.parent;\n  xml = ensureDefaultStyleResourceXML(xml);\n  var appTheme = getStyleParent(xml, parent);\n  if (!appTheme) {\n    appTheme = (0, _Resources().buildResourceGroup)(parent);\n    xml.resources.style.push(appTheme);\n  }\n  if (appTheme.item) {\n    var existingItem = appTheme.item.filter(function (_ref5) {\n      var head = _ref5.$;\n      return head.name === item.$.name;\n    })[0];\n    if (existingItem) {\n      existingItem._ = item._;\n      existingItem.$ = item.$;\n    } else {\n      appTheme.item.push(item);\n    }\n  } else {\n    appTheme.item = [item];\n  }\n  return xml;\n}\nfunction removeStylesItem(_ref6) {\n  var name = _ref6.name,\n    xml = _ref6.xml,\n    parent = _ref6.parent;\n  xml = ensureDefaultStyleResourceXML(xml);\n  var appTheme = getStyleParent(xml, parent);\n  if (appTheme !== null && appTheme !== void 0 && appTheme.item) {\n    var index = appTheme.item.findIndex(function (_ref7) {\n      var head = _ref7.$;\n      return head.name === name;\n    });\n    if (index > -1) {\n      appTheme.item.splice(index, 1);\n    }\n  }\n  return xml;\n}\nfunction getAppThemeLightNoActionBarGroup() {\n  return {\n    name: 'AppTheme',\n    parent: 'Theme.AppCompat.Light.NoActionBar'\n  };\n}\nfunction assignStylesValue(xml, _ref8) {\n  var add = _ref8.add,\n    value = _ref8.value,\n    targetApi = _ref8.targetApi,\n    name = _ref8.name,\n    parent = _ref8.parent;\n  if (add) {\n    return setStylesItem({\n      xml: xml,\n      parent: parent,\n      item: (0, _Resources().buildResourceItem)({\n        name: name,\n        targetApi: targetApi,\n        value: value\n      })\n    });\n  }\n  return removeStylesItem({\n    xml: xml,\n    parent: parent,\n    name: name\n  });\n}\nfunction getStylesGroupAsObject(xml, group) {\n  var xmlGroup = getStyleParent(xml, group);\n  return xmlGroup !== null && xmlGroup !== void 0 && xmlGroup.item ? (0, _Resources().getResourceItemsAsObject)(xmlGroup.item) : null;\n}","map":{"version":3,"names":["_Paths","data","require","_Resources","fallbackResourceString","readStylesXMLAsync","_x","_readStylesXMLAsync","apply","arguments","_asyncToGenerator","_ref","path","_ref$fallback","fallback","readResourcesXMLAsync","getProjectStylesXMLPathAsync","_x2","_getProjectStylesXMLPathAsync","projectRoot","_ref9","length","undefined","kind","getResourceXMLPathAsync","name","ensureDefaultStyleResourceXML","xml","_xml","_xml$resources","ensureDefaultResourceXML","Array","isArray","resources","style","getStyleParent","group","findResourceGroup","getStylesItem","_ref2","parent","appTheme","item","existingItem","filter","_ref3","head","$","setStylesItem","_ref4","buildResourceGroup","push","_ref5","_","removeStylesItem","_ref6","index","findIndex","_ref7","splice","getAppThemeLightNoActionBarGroup","assignStylesValue","_ref8","add","value","targetApi","buildResourceItem","getStylesGroupAsObject","xmlGroup","getResourceItemsAsObject"],"sources":["/Users/henriqueeidt/Documents/Projects/poc-web-mobile-components/component-library/node_modules/@expo/config-plugins/src/android/Styles.ts"],"sourcesContent":["import { getResourceXMLPathAsync } from './Paths';\nimport {\n  buildResourceGroup,\n  buildResourceItem,\n  ensureDefaultResourceXML,\n  findResourceGroup,\n  getResourceItemsAsObject,\n  readResourcesXMLAsync,\n  ResourceGroupXML,\n  ResourceItemXML,\n  ResourceKind,\n  ResourceXML,\n} from './Resources';\n\n// Adds support for `tools:x`\nconst fallbackResourceString = `<?xml version=\"1.0\" encoding=\"utf-8\"?><resources xmlns:tools=\"http://schemas.android.com/tools\"></resources>`;\n\nexport async function readStylesXMLAsync({\n  path,\n  fallback = fallbackResourceString,\n}: {\n  path: string;\n  fallback?: string | null;\n}): Promise<ResourceXML> {\n  return readResourcesXMLAsync({ path, fallback });\n}\n\nexport async function getProjectStylesXMLPathAsync(\n  projectRoot: string,\n  { kind }: { kind?: ResourceKind } = {}\n): Promise<string> {\n  return getResourceXMLPathAsync(projectRoot, { kind, name: 'styles' });\n}\n\nfunction ensureDefaultStyleResourceXML(xml: ResourceXML): ResourceXML {\n  xml = ensureDefaultResourceXML(xml);\n  if (!Array.isArray(xml?.resources?.style)) {\n    xml.resources.style = [];\n  }\n  return xml;\n}\n\nexport function getStyleParent(\n  xml: ResourceXML,\n  group: { name: string; parent?: string }\n): ResourceGroupXML | null {\n  return findResourceGroup(xml.resources.style, group);\n}\n\nexport function getStylesItem({\n  name,\n  xml,\n  parent,\n}: {\n  name: string;\n  xml: ResourceXML;\n  parent: { name: string; parent?: string };\n}): ResourceItemXML | null {\n  xml = ensureDefaultStyleResourceXML(xml);\n\n  const appTheme = getStyleParent(xml, parent);\n\n  if (!appTheme) {\n    return null;\n  }\n\n  if (appTheme.item) {\n    const existingItem = appTheme.item.filter(({ $: head }) => head.name === name)[0];\n\n    // Don't want to 2 of the same item, so if one exists, we overwrite it\n    if (existingItem) {\n      return existingItem;\n    }\n  }\n  return null;\n}\n\nexport function setStylesItem({\n  item,\n  xml,\n  parent,\n}: {\n  item: ResourceItemXML;\n  xml: ResourceXML;\n  parent: { name: string; parent: string };\n}): ResourceXML {\n  xml = ensureDefaultStyleResourceXML(xml);\n\n  let appTheme = getStyleParent(xml, parent);\n\n  if (!appTheme) {\n    appTheme = buildResourceGroup(parent);\n    xml.resources!.style!.push(appTheme);\n  }\n\n  if (appTheme.item) {\n    const existingItem = appTheme.item.filter(({ $: head }) => head.name === item.$.name)[0];\n\n    // Don't want to 2 of the same item, so if one exists, we overwrite it\n    if (existingItem) {\n      existingItem._ = item._;\n      existingItem.$ = item.$;\n    } else {\n      appTheme.item.push(item);\n    }\n  } else {\n    appTheme.item = [item];\n  }\n  return xml;\n}\n\nexport function removeStylesItem({\n  name,\n  xml,\n  parent,\n}: {\n  name: string;\n  xml: ResourceXML;\n  parent: { name: string; parent: string };\n}): ResourceXML {\n  xml = ensureDefaultStyleResourceXML(xml);\n  const appTheme = getStyleParent(xml, parent);\n  if (appTheme?.item) {\n    const index = appTheme.item.findIndex(({ $: head }: ResourceItemXML) => head.name === name);\n    if (index > -1) {\n      appTheme.item.splice(index, 1);\n    }\n  }\n  return xml;\n}\n\n// This is a very common theme so make it reusable.\nexport function getAppThemeLightNoActionBarGroup() {\n  return { name: 'AppTheme', parent: 'Theme.AppCompat.Light.NoActionBar' };\n}\n\nexport function assignStylesValue(\n  xml: ResourceXML,\n  {\n    add,\n    value,\n    targetApi,\n    name,\n    parent,\n  }: {\n    add: boolean;\n    value: string;\n    targetApi?: string;\n    name: string;\n    parent: { name: string; parent: string };\n  }\n): ResourceXML {\n  if (add) {\n    return setStylesItem({\n      xml,\n      parent,\n      item: buildResourceItem({\n        name,\n        targetApi,\n        value,\n      }),\n    });\n  }\n  return removeStylesItem({\n    xml,\n    parent,\n    name,\n  });\n}\n\n/**\n * Helper to convert a styles.xml parent's children into a simple k/v pair.\n * Added for testing purposes.\n *\n * @param xml\n * @returns\n */\nexport function getStylesGroupAsObject(\n  xml: ResourceXML,\n  group: { name: string; parent?: string }\n): Record<string, string> | null {\n  const xmlGroup = getStyleParent(xml, group);\n  return xmlGroup?.item ? getResourceItemsAsObject(xmlGroup.item) : null;\n}\n"],"mappings":";;;;;;;;;;;;;;;AAAA,SAAAA,OAAA;EAAA,IAAAC,IAAA,GAAAC,OAAA;EAAAF,MAAA,YAAAA,OAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAE,WAAA;EAAA,IAAAF,IAAA,GAAAC,OAAA;EAAAC,UAAA,YAAAA,WAAA;IAAA,OAAAF,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAcA,IAAMG,sBAAsB,uHAA5B;AAAA,SAEsBC,kBAAfA,CAAAC,EAAA;EAAA,OAAAC,mBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,oBAAA;EAAAA,mBAAA,GAAAG,iBAAA,YAAAC,IAAA,EAMkB;IAAA,IALvBC,IADuC,GAAAD,IAAA,CACvCC,IADuC;MAAAC,aAAA,GAAAF,IAAA,CAEvCG,QAAQ;MAARA,QAAQ,GAAAD,aAAA,cAAGT,sBAAA,GAAAS,aAAA;IAKX,OAAO,IAAAV,UAAA,GAAAY,qBAAA,EAAsB;MAAEH,IAAF,EAAEA,IAAF;MAAQE,QAAA,EAAAA;IAAR,CAAtB,CAAP;EACD;EAAA,OAAAP,mBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAEqBO,4BAAfA,CAAAC,GAAA;EAAA,OAAAC,6BAAA,CAAAV,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAS,8BAAA;EAAAA,6BAAA,GAAAR,iBAAA,YACLS,WADK,EAGY;IAAA,IAAAC,KAAA,GAAAX,SAAA,CAAAY,MAAA,QAAAZ,SAAA,QAAAa,SAAA,GAAAb,SAAA,MADmB,EAF/B;MAEHc,IAAA,GAAAH,KAAA,CAAAG,IAAA;IAEF,OAAO,IAAAvB,MAAA,GAAAwB,uBAAA,EAAwBL,WAAxB,EAAqC;MAAEI,IAAF,EAAEA,IAAF;MAAQE,IAAI,EAAE;IAAd,CAArC,CAAP;EACD;EAAA,OAAAP,6BAAA,CAAAV,KAAA,OAAAC,SAAA;AAAA;AAED,SAASiB,6BAATA,CAAuCC,GAAvC,EAAsE;EAAA,IAAAC,IAAA,EAAAC,cAAA;EACpEF,GAAG,GAAG,IAAAxB,UAAA,GAAA2B,wBAAA,EAAyBH,GAAzB,CAAN;EACA,IAAI,CAACI,KAAK,CAACC,OAAN,EAAAJ,IAAA,GAAcD,GAAd,cAAAC,IAAA,wBAAAC,cAAA,GAAcD,IAAA,CAAKK,SAAnB,cAAAJ,cAAA,uBAAcA,cAAA,CAAgBK,KAA9B,CAAL,EAA2C;IACzCP,GAAG,CAACM,SAAJ,CAAcC,KAAd,GAAsB,EAAtB;EACD;EACD,OAAOP,GAAP;AACD;AAEM,SAASQ,cAATA,CACLR,GADK,EAELS,KAFK,EAGoB;EACzB,OAAO,IAAAjC,UAAA,GAAAkC,iBAAA,EAAkBV,GAAG,CAACM,SAAJ,CAAcC,KAAhC,EAAuCE,KAAvC,CAAP;AACD;AAEM,SAASE,aAATA,CAAAC,KAAA,EAQoB;EAAA,IAPzBd,IAD4B,GAAAc,KAAA,CAC5Bd,IAD4B;IAE5BE,GAF4B,GAAAY,KAAA,CAE5BZ,GAF4B;IAG5Ba,MAAA,GAAAD,KAAA,CAAAC,MAAA;EAMAb,GAAG,GAAGD,6BAA6B,CAACC,GAAD,CAAnC;EAEA,IAAMc,QAAQ,GAAGN,cAAc,CAACR,GAAD,EAAMa,MAAN,CAA/B;EAEA,IAAI,CAACC,QAAL,EAAe;IACb,OAAO,IAAP;EACD;EAED,IAAIA,QAAQ,CAACC,IAAb,EAAmB;IACjB,IAAMC,YAAY,GAAGF,QAAQ,CAACC,IAAT,CAAcE,MAAd,CAAqB,UAAAC,KAAA;MAAA,IAAMC,IAAA,GAAAD,KAAA,CAAHE,CAAC;MAAA,OAAaD,IAAI,CAACrB,IAAL,KAAcA,IAApD;IAAA,GAA0D,CAA1D,CAArB;IAGA,IAAIkB,YAAJ,EAAkB;MAChB,OAAOA,YAAP;IACD;EACF;EACD,OAAO,IAAP;AACD;AAEM,SAASK,aAATA,CAAAC,KAAA,EAQS;EAAA,IAPdP,IAD4B,GAAAO,KAAA,CAC5BP,IAD4B;IAE5Bf,GAF4B,GAAAsB,KAAA,CAE5BtB,GAF4B;IAG5Ba,MAAA,GAAAS,KAAA,CAAAT,MAAA;EAMAb,GAAG,GAAGD,6BAA6B,CAACC,GAAD,CAAnC;EAEA,IAAIc,QAAQ,GAAGN,cAAc,CAACR,GAAD,EAAMa,MAAN,CAA7B;EAEA,IAAI,CAACC,QAAL,EAAe;IACbA,QAAQ,GAAG,IAAAtC,UAAA,GAAA+C,kBAAA,EAAmBV,MAAnB,CAAX;IACAb,GAAG,CAACM,SAAJ,CAAeC,KAAf,CAAsBiB,IAAtB,CAA2BV,QAA3B;EACD;EAED,IAAIA,QAAQ,CAACC,IAAb,EAAmB;IACjB,IAAMC,YAAY,GAAGF,QAAQ,CAACC,IAAT,CAAcE,MAAd,CAAqB,UAAAQ,KAAA;MAAA,IAAMN,IAAA,GAAAM,KAAA,CAAHL,CAAC;MAAA,OAAaD,IAAI,CAACrB,IAAL,KAAciB,IAAI,CAACK,CAAL,CAAOtB,IAA3D;IAAA,GAAiE,CAAjE,CAArB;IAGA,IAAIkB,YAAJ,EAAkB;MAChBA,YAAY,CAACU,CAAb,GAAiBX,IAAI,CAACW,CAAtB;MACAV,YAAY,CAACI,CAAb,GAAiBL,IAAI,CAACK,CAAtB;IACD,CAHD,MAGO;MACLN,QAAQ,CAACC,IAAT,CAAcS,IAAd,CAAmBT,IAAnB;IACD;EACF,CAVD,MAUO;IACLD,QAAQ,CAACC,IAAT,GAAgB,CAACA,IAAD,CAAhB;EACD;EACD,OAAOf,GAAP;AACD;AAEM,SAAS2B,gBAATA,CAAAC,KAAA,EAQS;EAAA,IAPd9B,IAD+B,GAAA8B,KAAA,CAC/B9B,IAD+B;IAE/BE,GAF+B,GAAA4B,KAAA,CAE/B5B,GAF+B;IAG/Ba,MAAA,GAAAe,KAAA,CAAAf,MAAA;EAMAb,GAAG,GAAGD,6BAA6B,CAACC,GAAD,CAAnC;EACA,IAAMc,QAAQ,GAAGN,cAAc,CAACR,GAAD,EAAMa,MAAN,CAA/B;EACA,IAAIC,QAAJ,aAAIA,QAAJ,eAAIA,QAAQ,CAAEC,IAAd,EAAoB;IAClB,IAAMc,KAAK,GAAGf,QAAQ,CAACC,IAAT,CAAce,SAAd,CAAwB,UAAAC,KAAA;MAAA,IAAMZ,IAAA,GAAAY,KAAA,CAAHX,CAAC;MAAA,OAA8BD,IAAI,CAACrB,IAAL,KAAcA,IAAxE;IAAA,EAAd;IACA,IAAI+B,KAAK,GAAG,CAAC,CAAb,EAAgB;MACdf,QAAQ,CAACC,IAAT,CAAciB,MAAd,CAAqBH,KAArB,EAA4B,CAA5B;IACD;EACF;EACD,OAAO7B,GAAP;AACD;AAGM,SAASiC,gCAATA,CAAA,EAA4C;EACjD,OAAO;IAAEnC,IAAI,EAAE,UAAR;IAAoBe,MAAM,EAAE;EAA5B,CAAP;AACD;AAEM,SAASqB,iBAATA,CACLlC,GADK,EAAAmC,KAAA,EAeQ;EAAA,IAZXC,GADF,GAAAD,KAAA,CACEC,GADF;IAEEC,KAFF,GAAAF,KAAA,CAEEE,KAFF;IAGEC,SAHF,GAAAH,KAAA,CAGEG,SAHF;IAIExC,IAJF,GAAAqC,KAAA,CAIErC,IAJF;IAKEe,MAAA,GAAAsB,KAAA,CAAAtB,MAAA;EASF,IAAIuB,GAAJ,EAAS;IACP,OAAOf,aAAa,CAAC;MACnBrB,GADmB,EACnBA,GADmB;MAEnBa,MAFmB,EAEnBA,MAFmB;MAGnBE,IAAI,EAAE,IAAAvC,UAAA,GAAA+D,iBAAA,EAAkB;QACtBzC,IADsB,EACtBA,IADsB;QAEtBwC,SAFsB,EAEtBA,SAFsB;QAGtBD,KAAA,EAAAA;MAHsB,CAAlB;IAHa,CAAD,CAApB;EASD;EACD,OAAOV,gBAAgB,CAAC;IACtB3B,GADsB,EACtBA,GADsB;IAEtBa,MAFsB,EAEtBA,MAFsB;IAGtBf,IAAA,EAAAA;EAHsB,CAAD,CAAvB;AAKD;AASM,SAAS0C,sBAATA,CACLxC,GADK,EAELS,KAFK,EAG0B;EAC/B,IAAMgC,QAAQ,GAAGjC,cAAc,CAACR,GAAD,EAAMS,KAAN,CAA/B;EACA,OAAOgC,QAAQ,SAAR,IAAAA,QAAQ,WAAR,IAAAA,QAAQ,CAAE1B,IAAV,GAAiB,IAAAvC,UAAA,GAAAkE,wBAAA,EAAyBD,QAAQ,CAAC1B,IAAlC,CAAjB,GAA2D,IAAlE;AACD"},"metadata":{},"sourceType":"script","externalDependencies":[]}