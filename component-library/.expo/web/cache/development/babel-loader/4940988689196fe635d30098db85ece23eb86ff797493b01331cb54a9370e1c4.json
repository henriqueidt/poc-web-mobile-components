{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getModuleDependencyWarning = exports.getNotFoundError = void 0;\nvar chalk_1 = __importDefault(require(\"chalk\"));\nvar path_1 = __importDefault(require(\"path\"));\nvar WebpackFileError_1 = require(\"./WebpackFileError\");\nvar createOriginalStackFrame_1 = require(\"./createOriginalStackFrame\");\nvar isWebpack5 = false;\nfunction getModuleTrace(input, compilation) {\n  var visitedModules = new Set();\n  var moduleTrace = [];\n  var current = input.module;\n  while (current) {\n    if (visitedModules.has(current)) break;\n    visitedModules.add(current);\n    var origin = compilation.moduleGraph.getIssuer(current);\n    if (!origin) break;\n    moduleTrace.push({\n      origin: origin,\n      module: current\n    });\n    current = origin;\n  }\n  return moduleTrace;\n}\nfunction getNotFoundError(_x, _x2, _x3) {\n  return _getNotFoundError.apply(this, arguments);\n}\nfunction _getNotFoundError() {\n  _getNotFoundError = _asyncToGenerator(function* (compilation, input, fileName) {\n    if (input.name !== 'ModuleNotFoundError') {\n      return false;\n    }\n    var stack = yield createStackTrace(getProjectRoot(compilation), {\n      loc: input.loc ? input.loc : (input.dependencies || []).map(function (d) {\n        return d.loc;\n      }).filter(Boolean)[0],\n      originalSource: input.module.originalSource()\n    });\n    if (!stack) {\n      return input;\n    }\n    var errorMessage = input.error.message.replace(/ in '.*?'/, '').replace(/Can't resolve '(.*)'/, \"Can't resolve '\" + chalk_1.default.green('$1') + \"'\");\n    return new WebpackFileError_1.WebpackFileError({\n      filePath: fileName,\n      line: stack.lineNumber,\n      col: stack.column\n    }, [chalk_1.default.red.bold('Module not found') + (\": \" + errorMessage), stack.frame, getImportTrace(compilation, input)].filter(Boolean).join('\\n'));\n  });\n  return _getNotFoundError.apply(this, arguments);\n}\nexports.getNotFoundError = getNotFoundError;\nfunction getImportTrace(compilation, input) {\n  if (!isWebpack5) {\n    return '';\n  }\n  var projectRoot = getProjectRoot(compilation);\n  var importTraceLine = '\\nImport trace for requested module:\\n';\n  var moduleTrace = getModuleTrace(input, compilation);\n  for (var _ref of moduleTrace) {\n    var origin = _ref.origin;\n    if (!origin.resource) {\n      continue;\n    }\n    var filePath = path_1.default.relative(projectRoot, origin.resource);\n    importTraceLine += \"./\" + filePath + \"\\n\";\n  }\n  return importTraceLine + '\\n';\n}\nfunction getModuleDependencyWarning(_x4, _x5, _x6) {\n  return _getModuleDependencyWarning.apply(this, arguments);\n}\nfunction _getModuleDependencyWarning() {\n  _getModuleDependencyWarning = _asyncToGenerator(function* (compilation, input, fileName) {\n    if (input.name !== 'ModuleDependencyWarning') {\n      return false;\n    }\n    var stack = yield createStackTrace(getProjectRoot(compilation), {\n      loc: input.loc,\n      originalSource: input.module.originalSource()\n    });\n    if (!stack) {\n      return input;\n    }\n    return new WebpackFileError_1.WebpackFileError({\n      filePath: fileName,\n      line: stack.lineNumber,\n      col: stack.column\n    }, [input.error.message, stack.frame, getImportTrace(compilation, input)].filter(Boolean).join('\\n'));\n  });\n  return _getModuleDependencyWarning.apply(this, arguments);\n}\nexports.getModuleDependencyWarning = getModuleDependencyWarning;\nfunction getProjectRoot(compilation) {\n  var _a;\n  return (_a = compilation.options.context) !== null && _a !== void 0 ? _a : compilation.context;\n}\nfunction createStackTrace(_x7, _x8) {\n  return _createStackTrace.apply(this, arguments);\n}\nfunction _createStackTrace() {\n  _createStackTrace = _asyncToGenerator(function* (projectRoot, _ref2) {\n    var loc = _ref2.loc,\n      originalSource = _ref2.originalSource;\n    var _a, _b, _c;\n    try {\n      var result = yield (0, createOriginalStackFrame_1.createOriginalStackFrame)({\n        line: (_a = loc === null || loc === void 0 ? void 0 : loc.start) === null || _a === void 0 ? void 0 : _a.line,\n        column: (_b = loc === null || loc === void 0 ? void 0 : loc.start) === null || _b === void 0 ? void 0 : _b.column,\n        source: originalSource,\n        rootDirectory: projectRoot,\n        frameNodeModules: true,\n        frame: {}\n      });\n      if (!result) {\n        return null;\n      }\n      return {\n        lineNumber: result.originalStackFrame.lineNumber,\n        column: result.originalStackFrame.column,\n        frame: (_c = result.originalCodeFrame) !== null && _c !== void 0 ? _c : ''\n      };\n    } catch (err) {\n      console.log('Failed to parse source map:', err);\n      return null;\n    }\n  });\n  return _createStackTrace.apply(this, arguments);\n}","map":{"version":3,"names":["chalk_1","__importDefault","require","path_1","WebpackFileError_1","createOriginalStackFrame_1","isWebpack5","getModuleTrace","input","compilation","visitedModules","Set","moduleTrace","current","module","has","add","origin","moduleGraph","getIssuer","push","getNotFoundError","_x","_x2","_x3","_getNotFoundError","apply","arguments","_asyncToGenerator","fileName","name","stack","createStackTrace","getProjectRoot","loc","dependencies","map","d","filter","Boolean","originalSource","errorMessage","error","message","replace","default","green","WebpackFileError","filePath","line","lineNumber","col","column","red","bold","frame","getImportTrace","join","exports","projectRoot","importTraceLine","_ref","resource","relative","getModuleDependencyWarning","_x4","_x5","_x6","_getModuleDependencyWarning","_a","options","context","_x7","_x8","_createStackTrace","_ref2","result","createOriginalStackFrame","start","_b","source","rootDirectory","frameNodeModules","originalStackFrame","_c","originalCodeFrame","err","console","log"],"sources":["/Users/henriqueeidt/Documents/Projects/poc-web-mobile-components/component-library/node_modules/@expo/webpack-config/src/plugins/ExpectedErrors/parseNotFoundError.ts"],"sourcesContent":["/**\n * Copyright JS Foundation and other contributors\n * Copyright (c) 2021 Vercel, Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * 'Software'), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n * Based on https://github.com/webpack/webpack/blob/fcdd04a833943394bbb0a9eeb54a962a24cc7e41/lib/stats/DefaultStatsFactoryPlugin.js#L422-L431\n * Based on https://github.com/vercel/next.js/pull/27840\n */\nimport chalk from 'chalk';\nimport path from 'path';\nimport webpack from 'webpack';\n\nimport { WebpackFileError } from './WebpackFileError';\nimport { createOriginalStackFrame } from './createOriginalStackFrame';\n\n// import { isWebpack5 } from 'webpack';\n// TODO: Webpack 5\nconst isWebpack5 = false;\n\nfunction getModuleTrace(input: any, compilation: any) {\n  const visitedModules = new Set();\n  const moduleTrace = [];\n  let current = input.module;\n  while (current) {\n    if (visitedModules.has(current)) break; // circular (technically impossible, but who knows)\n    visitedModules.add(current);\n    const origin = compilation.moduleGraph.getIssuer(current);\n    if (!origin) break;\n    moduleTrace.push({ origin, module: current });\n    current = origin;\n  }\n\n  return moduleTrace;\n}\n\nexport async function getNotFoundError(compilation: any, input: any, fileName: string) {\n  if (input.name !== 'ModuleNotFoundError') {\n    return false;\n  }\n  const stack = await createStackTrace(getProjectRoot(compilation), {\n    loc: input.loc\n      ? input.loc\n      : (input.dependencies || []).map((d: any) => d.loc).filter(Boolean)[0],\n    originalSource: input.module.originalSource(),\n  });\n  // If we could not result the original location we still need to show the existing error\n  if (!stack) {\n    return input;\n  }\n\n  const errorMessage = input.error.message\n    .replace(/ in '.*?'/, '')\n    .replace(/Can't resolve '(.*)'/, `Can't resolve '${chalk.green('$1')}'`);\n\n  return new WebpackFileError(\n    {\n      filePath: fileName,\n      line: stack.lineNumber,\n      col: stack.column,\n    },\n    [\n      chalk.red.bold('Module not found') + `: ${errorMessage}`,\n      stack.frame,\n      getImportTrace(compilation, input),\n      // TODO: FYI\n    ]\n      .filter(Boolean)\n      .join('\\n')\n  );\n}\n\nfunction getImportTrace(compilation: webpack.Compilation, input: any) {\n  if (!isWebpack5) {\n    return '';\n  }\n\n  const projectRoot = getProjectRoot(compilation);\n\n  let importTraceLine = '\\nImport trace for requested module:\\n';\n  const moduleTrace = getModuleTrace(input, compilation);\n\n  for (const { origin } of moduleTrace) {\n    if (!origin.resource) {\n      continue;\n    }\n    const filePath = path.relative(projectRoot, origin.resource);\n    importTraceLine += `./${filePath}\\n`;\n  }\n\n  return importTraceLine + '\\n';\n}\n\n// This can occur in React Native when using require incorrectly:\n// i.e. `(require: any).Systrace = Systrace;` which is valid in Metro.\nexport async function getModuleDependencyWarning(\n  compilation: webpack.Compilation,\n  input: any,\n  fileName: string\n) {\n  if (input.name !== 'ModuleDependencyWarning') {\n    return false;\n  }\n\n  const stack = await createStackTrace(getProjectRoot(compilation), {\n    loc: input.loc,\n    originalSource: input.module.originalSource(),\n  });\n\n  // If we could not result the original location we still need to show the existing error\n  if (!stack) {\n    return input;\n  }\n\n  return new WebpackFileError(\n    {\n      filePath: fileName,\n      line: stack.lineNumber,\n      col: stack.column,\n    },\n    [\n      input.error.message,\n      stack.frame,\n      getImportTrace(compilation, input),\n      // TODO: FYI\n    ]\n      .filter(Boolean)\n      .join('\\n')\n  );\n}\n\nfunction getProjectRoot(compilation: webpack.Compilation): string {\n  // @ts-ignore: Webpack v5/v4\n  return compilation.options.context ?? compilation.context;\n}\n\nasync function createStackTrace(\n  projectRoot: string,\n  { loc, originalSource }: { loc: any; originalSource: any }\n) {\n  try {\n    const result = await createOriginalStackFrame({\n      line: loc?.start?.line,\n      column: loc?.start?.column,\n      source: originalSource,\n      rootDirectory: projectRoot,\n      frameNodeModules: true,\n      frame: {},\n    });\n\n    // If we could not result the original location we still need to show the existing error\n    if (!result) {\n      return null;\n    }\n    return {\n      lineNumber: result.originalStackFrame.lineNumber,\n      column: result.originalStackFrame.column,\n      frame: result.originalCodeFrame ?? '',\n    };\n  } catch (err: any) {\n    console.log('Failed to parse source map:', err);\n    // Don't fail on failure to resolve sourcemaps\n    return null;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}