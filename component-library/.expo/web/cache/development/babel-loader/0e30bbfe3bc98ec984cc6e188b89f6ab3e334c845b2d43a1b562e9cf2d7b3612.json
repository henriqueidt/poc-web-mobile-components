{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"@babel/runtime/helpers/slicedToArray\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setProvisioningProfileForPbxproj = setProvisioningProfileForPbxproj;\nfunction _fs() {\n  var data = _interopRequireDefault(require(\"fs\"));\n  _fs = function _fs() {\n    return data;\n  };\n  return data;\n}\nfunction _Target() {\n  var data = require(\"./Target\");\n  _Target = function _Target() {\n    return data;\n  };\n  return data;\n}\nfunction _Xcodeproj() {\n  var data = require(\"./utils/Xcodeproj\");\n  _Xcodeproj = function _Xcodeproj() {\n    return data;\n  };\n  return data;\n}\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction setProvisioningProfileForPbxproj(projectRoot, _ref) {\n  var targetName = _ref.targetName,\n    profileName = _ref.profileName,\n    appleTeamId = _ref.appleTeamId,\n    _ref$buildConfigurati = _ref.buildConfiguration,\n    buildConfiguration = _ref$buildConfigurati === void 0 ? 'Release' : _ref$buildConfigurati;\n  var project = (0, _Xcodeproj().getPbxproj)(projectRoot);\n  var nativeTargetEntry = targetName ? (0, _Target().findNativeTargetByName)(project, targetName) : (0, _Target().findFirstNativeTarget)(project);\n  var _nativeTargetEntry = _slicedToArray(nativeTargetEntry, 2),\n    nativeTargetId = _nativeTargetEntry[0],\n    nativeTarget = _nativeTargetEntry[1];\n  var quotedAppleTeamId = ensureQuotes(appleTeamId);\n  (0, _Xcodeproj().getBuildConfigurationsForListId)(project, nativeTarget.buildConfigurationList).filter(function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n      item = _ref3[1];\n    return item.name === buildConfiguration;\n  }).forEach(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n      item = _ref5[1];\n    item.buildSettings.PROVISIONING_PROFILE_SPECIFIER = \"\\\"\" + profileName + \"\\\"\";\n    item.buildSettings.DEVELOPMENT_TEAM = quotedAppleTeamId;\n    item.buildSettings.CODE_SIGN_IDENTITY = '\"iPhone Distribution\"';\n    item.buildSettings.CODE_SIGN_STYLE = 'Manual';\n  });\n  Object.entries((0, _Xcodeproj().getProjectSection)(project)).filter(_Xcodeproj().isNotComment).forEach(function (_ref6) {\n    var _ref7 = _slicedToArray(_ref6, 2),\n      item = _ref7[1];\n    if (!item.attributes.TargetAttributes[nativeTargetId]) {\n      item.attributes.TargetAttributes[nativeTargetId] = {};\n    }\n    item.attributes.TargetAttributes[nativeTargetId].DevelopmentTeam = quotedAppleTeamId;\n    item.attributes.TargetAttributes[nativeTargetId].ProvisioningStyle = 'Manual';\n  });\n  _fs().default.writeFileSync(project.filepath, project.writeSync());\n}\nvar ensureQuotes = function ensureQuotes(value) {\n  if (!value.match(/^['\"]/)) {\n    return \"\\\"\" + value + \"\\\"\";\n  }\n  return value;\n};","map":{"version":3,"names":["_fs","data","_interopRequireDefault","require","_Target","_Xcodeproj","setProvisioningProfileForPbxproj","projectRoot","_ref","targetName","profileName","appleTeamId","_ref$buildConfigurati","buildConfiguration","project","getPbxproj","nativeTargetEntry","findNativeTargetByName","findFirstNativeTarget","_nativeTargetEntry","_slicedToArray","nativeTargetId","nativeTarget","quotedAppleTeamId","ensureQuotes","getBuildConfigurationsForListId","buildConfigurationList","filter","_ref2","_ref3","item","name","forEach","_ref4","_ref5","buildSettings","PROVISIONING_PROFILE_SPECIFIER","DEVELOPMENT_TEAM","CODE_SIGN_IDENTITY","CODE_SIGN_STYLE","Object","entries","getProjectSection","isNotComment","_ref6","_ref7","attributes","TargetAttributes","DevelopmentTeam","ProvisioningStyle","default","writeFileSync","filepath","writeSync","value","match"],"sources":["/Users/henriqueeidt/Documents/Projects/poc-web-mobile-components/component-library/node_modules/@expo/config-plugins/src/ios/ProvisioningProfile.ts"],"sourcesContent":["import fs from 'fs';\n\nimport { findFirstNativeTarget, findNativeTargetByName } from './Target';\nimport {\n  ConfigurationSectionEntry,\n  getBuildConfigurationsForListId,\n  getPbxproj,\n  getProjectSection,\n  isNotComment,\n  ProjectSectionEntry,\n} from './utils/Xcodeproj';\n\ntype ProvisioningProfileSettings = {\n  targetName?: string;\n  appleTeamId: string;\n  profileName: string;\n  buildConfiguration?: string;\n};\n\nexport function setProvisioningProfileForPbxproj(\n  projectRoot: string,\n  {\n    targetName,\n    profileName,\n    appleTeamId,\n    buildConfiguration = 'Release',\n  }: ProvisioningProfileSettings\n): void {\n  const project = getPbxproj(projectRoot);\n\n  const nativeTargetEntry = targetName\n    ? findNativeTargetByName(project, targetName)\n    : findFirstNativeTarget(project);\n  const [nativeTargetId, nativeTarget] = nativeTargetEntry;\n\n  const quotedAppleTeamId = ensureQuotes(appleTeamId);\n\n  getBuildConfigurationsForListId(project, nativeTarget.buildConfigurationList)\n    .filter(([, item]: ConfigurationSectionEntry) => item.name === buildConfiguration)\n    .forEach(([, item]: ConfigurationSectionEntry) => {\n      item.buildSettings.PROVISIONING_PROFILE_SPECIFIER = `\"${profileName}\"`;\n      item.buildSettings.DEVELOPMENT_TEAM = quotedAppleTeamId;\n      item.buildSettings.CODE_SIGN_IDENTITY = '\"iPhone Distribution\"';\n      item.buildSettings.CODE_SIGN_STYLE = 'Manual';\n    });\n\n  Object.entries(getProjectSection(project))\n    .filter(isNotComment)\n    .forEach(([, item]: ProjectSectionEntry) => {\n      if (!item.attributes.TargetAttributes[nativeTargetId]) {\n        item.attributes.TargetAttributes[nativeTargetId] = {};\n      }\n      item.attributes.TargetAttributes[nativeTargetId].DevelopmentTeam = quotedAppleTeamId;\n      item.attributes.TargetAttributes[nativeTargetId].ProvisioningStyle = 'Manual';\n    });\n\n  fs.writeFileSync(project.filepath, project.writeSync());\n}\n\nconst ensureQuotes = (value: string) => {\n  if (!value.match(/^['\"]/)) {\n    return `\"${value}\"`;\n  }\n  return value;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}