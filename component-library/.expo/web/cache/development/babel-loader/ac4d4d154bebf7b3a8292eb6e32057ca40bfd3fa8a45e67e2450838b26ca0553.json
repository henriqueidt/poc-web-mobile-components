{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isDebugMode = void 0;\nvar css_minimizer_webpack_plugin_1 = __importDefault(require(\"css-minimizer-webpack-plugin\"));\nvar getenv_1 = require(\"getenv\");\nvar is_wsl_1 = __importDefault(require(\"is-wsl\"));\nvar terser_webpack_plugin_1 = __importDefault(require(\"terser-webpack-plugin\"));\nfunction isDebugMode() {\n  return (0, getenv_1.boolish)('EXPO_WEB_DEBUG', false);\n}\nexports.isDebugMode = isDebugMode;\nfunction withOptimizations(webpackConfig) {\n  if (webpackConfig.mode !== 'production') {\n    webpackConfig.optimization = _objectSpread(_objectSpread({}, webpackConfig.optimization), {}, {\n      usedExports: false\n    });\n    return webpackConfig;\n  }\n  var _isDebugMode = isDebugMode();\n  webpackConfig.optimization = _objectSpread(_objectSpread({\n    usedExports: false\n  }, webpackConfig.optimization || {}), {}, {\n    splitChunks: {\n      chunks: 'all'\n    },\n    nodeEnv: false,\n    minimize: true,\n    minimizer: [new terser_webpack_plugin_1.default({\n      terserOptions: {\n        parse: {\n          ecma: 2018\n        },\n        compress: {\n          ecma: 5,\n          warnings: false,\n          comparisons: false,\n          inline: 2\n        },\n        mangle: _isDebugMode ? false : {\n          safari10: true\n        },\n        keep_classnames: _isDebugMode,\n        keep_fnames: _isDebugMode,\n        output: {\n          ecma: 5,\n          comments: _isDebugMode,\n          ascii_only: true\n        }\n      },\n      parallel: !is_wsl_1.default\n    }), new css_minimizer_webpack_plugin_1.default()],\n    emitOnErrors: false\n  });\n  return webpackConfig;\n}\nexports.default = withOptimizations;","map":{"version":3,"names":["css_minimizer_webpack_plugin_1","__importDefault","require","getenv_1","is_wsl_1","terser_webpack_plugin_1","isDebugMode","boolish","exports","withOptimizations","webpackConfig","mode","optimization","_objectSpread","usedExports","_isDebugMode","splitChunks","chunks","nodeEnv","minimize","minimizer","default","terserOptions","parse","ecma","compress","warnings","comparisons","inline","mangle","safari10","keep_classnames","keep_fnames","output","comments","ascii_only","parallel","emitOnErrors"],"sources":["/Users/henriqueeidt/Documents/Projects/poc-web-mobile-components/component-library/node_modules/@expo/webpack-config/src/addons/withOptimizations.ts"],"sourcesContent":["import CssMinimizerPlugin from 'css-minimizer-webpack-plugin';\nimport { boolish } from 'getenv';\nimport isWsl from 'is-wsl';\nimport TerserPlugin from 'terser-webpack-plugin';\nimport { Configuration } from 'webpack';\n\n/**\n * Returns `true` if the Expo web environment variable enabled.\n * @internal\n */\nexport function isDebugMode(): boolean {\n  return boolish('EXPO_WEB_DEBUG', false);\n}\n\n/**\n * Add the minifier and other optimizations for production builds.\n *\n * @param webpackConfig Existing Webpack config to modify.\n * @category addons\n */\nexport default function withOptimizations(webpackConfig: Configuration): Configuration {\n  if (webpackConfig.mode !== 'production') {\n    webpackConfig.optimization = {\n      ...webpackConfig.optimization,\n      // Required for React Native packages that use import/export syntax:\n      // https://webpack.js.org/configuration/optimization/#optimizationusedexports\n      usedExports: false,\n    };\n    return webpackConfig;\n  }\n\n  const _isDebugMode = isDebugMode();\n\n  webpackConfig.optimization = {\n    // Required for React Native packages that use import/export syntax:\n    // https://webpack.js.org/configuration/optimization/#optimizationusedexports\n    usedExports: false,\n    ...(webpackConfig.optimization || {}),\n\n    // https://github.com/facebook/create-react-app/discussions/11278#discussioncomment-1808511\n    splitChunks: {\n      chunks: 'all',\n    },\n    nodeEnv: false,\n    minimize: true,\n    minimizer: [\n      // This is only used in production mode\n      // @ts-ignore\n      new TerserPlugin({\n        terserOptions: {\n          parse: {\n            // We want terser to parse ecma 8 code. However, we don't want it\n            // to apply any minification steps that turns valid ecma 5 code\n            // into invalid ecma 5 code. This is why the 'compress' and 'output'\n            // sections only apply transformations that are ecma 5 safe\n            // https://github.com/facebook/create-react-app/pull/4234\n            ecma: 2018,\n          },\n          compress: {\n            ecma: 5,\n            warnings: false,\n            // Disabled because of an issue with Uglify breaking seemingly valid code:\n            // https://github.com/facebook/create-react-app/issues/2376\n            // Pending further investigation:\n            // https://github.com/mishoo/UglifyJS2/issues/2011\n            comparisons: false,\n            // Disabled because of an issue with Terser breaking valid code:\n            // https://github.com/facebook/create-react-app/issues/5250\n            // Pending futher investigation:\n            // https://github.com/terser-js/terser/issues/120\n            inline: 2,\n          },\n          mangle: _isDebugMode\n            ? false\n            : {\n                safari10: true,\n              },\n          keep_classnames: _isDebugMode,\n          keep_fnames: _isDebugMode,\n          output: {\n            ecma: 5,\n            comments: _isDebugMode,\n            // Turned on because emoji and regex is not minified properly using default\n            // https://github.com/facebook/create-react-app/issues/2488\n            ascii_only: true,\n          },\n        },\n        // Use multi-process parallel running to improve the build speed\n        // Default number of concurrent runs: os.cpus().length - 1\n        // Disabled on WSL (Windows Subsystem for Linux) due to an issue with Terser\n        // https://github.com/webpack-contrib/terser-webpack-plugin/issues/21\n        parallel: !isWsl,\n      }),\n      // This is only used in production mode\n      new CssMinimizerPlugin(),\n    ],\n    // Skip the emitting phase whenever there are errors while compiling. This ensures that no erroring assets are emitted.\n    emitOnErrors: false,\n  };\n\n  return webpackConfig;\n}\n"],"mappings":";;;;;;;;;;;;;;AAAA,IAAAA,8BAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AACA,IAAAE,QAAA,GAAAH,eAAA,CAAAC,OAAA;AACA,IAAAG,uBAAA,GAAAJ,eAAA,CAAAC,OAAA;AAOA,SAAgBI,WAAWA,CAAA;EACzB,OAAO,IAAAH,QAAA,CAAAI,OAAO,EAAC,gBAAgB,EAAE,KAAK,CAAC;AACzC;AAFAC,OAAA,CAAAF,WAAA,GAAAA,WAAA;AAUA,SAAwBG,iBAAiBA,CAACC,aAA4B;EACpE,IAAIA,aAAa,CAACC,IAAI,KAAK,YAAY,EAAE;IACvCD,aAAa,CAACE,YAAY,GAAAC,aAAA,CAAAA,aAAA,KACrBH,aAAa,CAACE,YAAY;MAG7BE,WAAW,EAAE;IAAK,EACnB;IACD,OAAOJ,aAAa;;EAGtB,IAAMK,YAAY,GAAGT,WAAW,EAAE;EAElCI,aAAa,CAACE,YAAY,GAAAC,aAAA,CAAAA,aAAA;IAGxBC,WAAW,EAAE;EAAK,GACdJ,aAAa,CAACE,YAAY,IAAI,EAAE;IAGpCI,WAAW,EAAE;MACXC,MAAM,EAAE;KACT;IACDC,OAAO,EAAE,KAAK;IACdC,QAAQ,EAAE,IAAI;IACdC,SAAS,EAAE,CAGT,IAAIf,uBAAA,CAAAgB,OAAY,CAAC;MACfC,aAAa,EAAE;QACbC,KAAK,EAAE;UAMLC,IAAI,EAAE;SACP;QACDC,QAAQ,EAAE;UACRD,IAAI,EAAE,CAAC;UACPE,QAAQ,EAAE,KAAK;UAKfC,WAAW,EAAE,KAAK;UAKlBC,MAAM,EAAE;SACT;QACDC,MAAM,EAAEd,YAAY,GAChB,KAAK,GACL;UACEe,QAAQ,EAAE;SACX;QACLC,eAAe,EAAEhB,YAAY;QAC7BiB,WAAW,EAAEjB,YAAY;QACzBkB,MAAM,EAAE;UACNT,IAAI,EAAE,CAAC;UACPU,QAAQ,EAAEnB,YAAY;UAGtBoB,UAAU,EAAE;;OAEf;MAKDC,QAAQ,EAAE,CAAChC,QAAA,CAAAiB;KACZ,CAAC,EAEF,IAAIrB,8BAAA,CAAAqB,OAAkB,EAAE,CACzB;IAEDgB,YAAY,EAAE;EAAK,EACpB;EAED,OAAO3B,aAAa;AACtB;AAjFAF,OAAA,CAAAa,OAAA,GAAAZ,iBAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}